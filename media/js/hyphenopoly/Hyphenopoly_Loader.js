/**
 * @license Hyphenopoly_Loader 3.0.0 - client side hyphenation
 * ©2019  Mathias Nater, Zürich (mathiasnater at gmail dot com)
 * https://github.com/mnater/Hyphenopoly
 *
 * Released under the MIT license
 * http://mnater.github.io/Hyphenopoly/LICENSE
 */
!function(){"use strict";function e(){return Object.create(null)}function t(e,t){Object.keys(e).forEach(t)}function n(){null===l.clientFeat.wasm&&(l.clientFeat.wasm=function(){if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.from([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]));if(WebAssembly.Module.prototype.isPrototypeOf(e)){const t=new WebAssembly.Instance(e);return WebAssembly.Instance.prototype.isPrototypeOf(t)&&0!==t.exports.test(4)}}return!1}())}function s(e,t){const n=i.createElement("script");n.src=e+t,"hyphenEngine.asm.js"===t&&n.addEventListener("load",function(){l.events.dispatch("engineLoaded",{msg:"asm"})}),i.head.appendChild(n)}function a(e,t,n,s){l.clientFeat.wasm?function(e,t,n,s){r.has(t)?"hyphenEngine"!==n&&r.get(t).push(s):(r.set(t,[s]),window.fetch(e+t).then(function(a){if(a.ok)if("hyphenEngine"===n)l.binaries.set(n,a.arrayBuffer().then(function(e){return new WebAssembly.Module(e)})),l.events.dispatch("engineLoaded",{msg:s});else{const e=r.get(t);e.forEach(function(t){l.binaries.set(t,e.length>1?a.clone().arrayBuffer():a.arrayBuffer()),l.events.dispatch("hpbLoaded",{msg:t})})}else l.events.dispatch("loadError",{file:t,msg:s,name:n,path:e})}))}(e,t,n,s):function(e,t,n,s){if(r.has(t))r.get(t).push(s);else{r.set(t,[s]);const a=new XMLHttpRequest;a.onload=function(){"OK"===a.statusText?r.get(t).forEach(function(e){l.binaries.set(e,a.response),l.events.dispatch("hpbLoaded",{msg:e})}):l.events.dispatch("loadError",{file:t,msg:s,name:n,path:e})},a.open("GET",e+t),a.responseType="arraybuffer",a.send()}}(e,t,n,s)}function o(){l.setup.hide.match(/^(?:element|text)$/)&&l.toggle("off"),l.events.dispatch("contentLoaded",{msg:["contentLoaded"]})}const i=document,l=Hyphenopoly;l.cacheFeatureTests&&sessionStorage.getItem("Hyphenopoly_Loader")?l.clientFeat=JSON.parse(sessionStorage.getItem("Hyphenopoly_Loader")):l.clientFeat={langs:e(),polyfill:!1,wasm:null},l.dfltPaths=Object.create({maindir:"../Hyphenopoly/",patterndir:"../Hyphenopoly/patterns/"}),l.paths&&(l.paths.patterndir&&(l.dfltPaths.patterndir=l.paths.patterndir),l.paths.maindir&&(l.dfltPaths.maindir=l.paths.maindir)),l.setup?(l.setup.selectors=l.setup.selectors||{".hyphenate":{}},l.setup.timeout=l.setup.timeout||1e3,l.setup.hide=l.setup.hide||"all"):l.setup={hide:"all",selectors:{".hyphenate":{}},timeout:1e3},l.lcRequire=new Map,t(l.require,function(e){l.lcRequire.set(e.toLowerCase(),l.require[e])}),l.fallbacks&&(l.lcFallbacks=new Map,t(l.fallbacks,function(e){l.lcFallbacks.set(e.toLowerCase(),l.fallbacks[e].toLowerCase())})),l.toggle=function(e){if("on"===e){const e=i.getElementById("H9Y_Styles");e&&e.parentNode.removeChild(e)}else{const e=" {visibility: hidden !important}\n",n=i.createElement("style");switch(n.id="H9Y_Styles",l.setup.hide){case"all":n.innerHTML="html"+e;break;case"element":t(l.setup.selectors,function(t){n.innerHTML+=t+e});break;case"text":t(l.setup.selectors,function(e){n.innerHTML+=e+" {color: transparent !important}\n"});break;default:n.innerHTML=""}i.getElementsByTagName("head")[0].appendChild(n)}},function(){function n(e,t,n){a.set(e,{cancellable:n,default:t,register:[]})}function s(e,t,n){a.has(e)?a.get(e).register.push(t):n?i.push({handler:t,name:e}):l.events.dispatch("error",{lvl:"warn",msg:'unknown Event "'+e+'" discarded'})}const a=new Map,o=[],i=[];n("timeout",function(e){l.toggle("on"),window.console.info("Hyphenopolys 'FOUHC'-prevention timed out after %dms",e.delay)},!1),n("error",function(e){switch(e.lvl){case"info":window.console.info(e.msg);break;case"warn":window.console.warn(e.msg);break;default:window.console.error(e.msg)}},!0),n("contentLoaded",function(e){o.push({data:e,name:"contentLoaded"})},!1),n("engineLoaded",function(e){o.push({data:e,name:"engineLoaded"})},!1),n("hpbLoaded",function(e){o.push({data:e,name:"hpbLoaded"})},!1),n("loadError",function(e){o.push({data:e,name:"loadError"})}),n("tearDown",null,!0),l.handleEvent&&t(l.handleEvent,function(e){s(e,l.handleEvent[e],!0)}),l.events=e(),l.events.deferred=o,l.events.tempRegister=i,l.events.dispatch=function(t,n){n=n||e();let s=!1;a.get(t).register.forEach(function(e){n.preventDefault=function(){a.get(t).cancellable&&(s=!0)},e(n)}),!s&&a.get(t).default&&a.get(t).default(n)},l.events.define=n,l.events.addListener=s}();const r=new Map;!function(){function o(e){let t=e+".hpb",n=e;l.lcFallbacks&&l.lcFallbacks.has(e)&&(t=(n=l.lcFallbacks.get(e))+".hpb"),l.binaries=l.binaries||new Map,a(l.dfltPaths.patterndir,t,n,e)}const r=function(){let e=null;const t=["visibility:hidden;","-moz-hyphens:auto;","-webkit-hyphens:auto;","-ms-hyphens:auto;","hyphens:auto;","width:48px;","font-size:12px;","line-height:12px;","border:none;","padding:0;","word-wrap:normal"].join("");return{append:function(t){return e?(t.appendChild(e),e):null},clear:function(){e&&e.parentNode.removeChild(e)},create:function(n){if(l.clientFeat.langs[n])return;e=e||i.createElement("body");const s=i.createElement("div");s.lang=n,s.id=n,s.style.cssText=t,s.appendChild(i.createTextNode(l.lcRequire.get(n))),e.appendChild(s)}}}();n(),l.lcRequire.forEach(function(e,t){"FORCEHYPHENOPOLY"===e?(l.clientFeat.polyfill=!0,l.clientFeat.langs[t]="H9Y",o(t)):l.clientFeat.langs[t]&&"H9Y"===l.clientFeat.langs[t]?o(t):r.create(t)});null!==r.append(i.documentElement)&&(l.lcRequire.forEach(function(e,t){if("FORCEHYPHENOPOLY"!==e){const e=i.getElementById(t);(function(e){return"auto"===e.style.hyphens||"auto"===e.style.webkitHyphens||"auto"===e.style.msHyphens||"auto"===e.style["-moz-hyphens"]})(e)&&e.offsetHeight>12?l.clientFeat.langs[t]="CSS":(l.clientFeat.polyfill=!0,l.clientFeat.langs[t]="H9Y",o(t))}}),r.clear()),l.clientFeat.polyfill&&(s(l.dfltPaths.maindir,"Hyphenopoly.js"),l.clientFeat.wasm?a(l.dfltPaths.maindir,"hyphenEngine.wasm","hyphenEngine","wasm"):s(l.dfltPaths.maindir,"hyphenEngine.asm.js"),t(l.clientFeat.langs,function(t){"H9Y"===l.clientFeat.langs[t]&&(function(e){const t=new Map([["de",55],["hu",207],["nb-no",92],["nl",41]]).get(e)||32;if(l.specMems=l.specMems||new Map,l.clientFeat.wasm)l.specMems.set(e,new WebAssembly.Memory({initial:t,maximum:256}));else{Math.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E};const n=65536*(2<<Math.floor(Math.log2(t)));l.specMems.set(e,new ArrayBuffer(n))}}(t),function(t){l.hyphenators=l.hyphenators||e(),l.hyphenators[t]||(window.Promise?l.hyphenators[t]=new Promise(function(e,n){l.events.addListener("engineReady",function(n){n.msg===t&&e(l.createHyphenator(n.msg))},!0),l.events.addListener("error",function(e){e.key!==t&&"hyphenEngine"!==e.key||n(e.msg)},!0)}):l.hyphenators[t]={then:function(){l.events.dispatch("error",{msg:"Promises not supported in this engine. Use a polyfill (e.g. https://github.com/taylorhakes/promise-polyfill)!"})}})}(t))}))}(),l.clientFeat.polyfill?("all"===l.setup.hide&&l.toggle("off"),"none"!==l.setup.hide&&(l.setup.timeOutHandler=window.setTimeout(function(){l.toggle("on"),l.events.dispatch("timeout",{delay:l.setup.timeout})},l.setup.timeout)),"loading"===i.readyState?i.addEventListener("DOMContentLoaded",o,{once:!0,passive:!0}):o()):(l.events.dispatch("tearDown",{}),window.Hyphenopoly=null),l.cacheFeatureTests&&sessionStorage.setItem("Hyphenopoly_Loader",JSON.stringify(l.clientFeat))}();
