"use strict";
/**
 * @license Hyphenopoly 3.4.0 - client side hyphenation for webbrowsers
 * ©2019  Mathias Nater, Zürich (mathiasnater at gmail dot com)
 * https://github.com/mnater/Hyphenopoly
 *
 * Released under the MIT license
 * http://mnater.github.io/Hyphenopoly/LICENSE
 */!function(e){var n,t,r,a,o,i=String.fromCharCode(173);function c(){return Object.create(null)}function l(e,n){return{configurable:(4&n)>0,enumerable:(2&n)>0,writable:(1&n)>0,value:e}}Math.imul=Math.imul||function(e,n){var t=65535&e,r=65535&n;return t*r+((e>>>16&65535)*r+t*(n>>>16&65535)<<16>>>0)|0},n=Hyphenopoly,r=Object.create(null,{defaultLanguage:l("en-us",2),dontHyphenate:l((t=c(),"abbr,acronym,audio,br,button,code,img,input,kbd,label,math,option,pre,samp,script,style,sub,sup,svg,textarea,var,video".split(",").forEach((function(e){t[e]=!0})),t),2),dontHyphenateClass:l("donthyphenate",2),exceptions:l(c(),2),keepAlive:l(!0,2),normalize:l(!1,2),safeCopy:l(!0,2),timeout:l(1e3,2)}),a=Object.create(r),o=Object.create(null,{compound:l("hyphen",2),hyphen:l(i,2),leftmin:l(0,2),leftminPerLang:l(0,2),minWordLength:l(6,2),mixedCase:l(!0,2),orphanControl:l(1,2),rightmin:l(0,2),rightminPerLang:l(0,2)}),Object.keys(n.setup).forEach((function(e){if("selectors"===e){var t=Object.keys(n.setup.selectors);Object.defineProperty(a,"selectors",l(t,2)),t.forEach((function(e){var t=c();Object.keys(n.setup.selectors[e]).forEach((function(r){t[r]=l(n.setup.selectors[e][r],2)})),Object.defineProperty(a,e,l(Object.create(o,t),2))}))}else if("dontHyphenate"===e){var i=c();Object.keys(n.setup.dontHyphenate).forEach((function(e){i[e]=l(n.setup.dontHyphenate[e],2)})),Object.defineProperty(a,e,l(Object.create(r.dontHyphenate,i),3))}else Object.defineProperty(a,e,l(n.setup[e],3))})),n.c=a,function(n){var t=n.c,r=null,a=null;function o(e,n){try{return e.getAttribute("lang")?e.getAttribute("lang").toLowerCase():"html"===e.tagName.toLowerCase()?n?r:null:o(e.parentNode,n)}catch(e){return null}}function s(){var r,c;r=new Map,a={add:function(e,n,t){var a={element:e,selector:t};return r.has(n)||r.set(n,[]),r.get(n).push(a),c[0]+=1,a},counter:c=[0],each:function(e){r.forEach((function(n,t){e(t,n)}))},list:r,rem:function(e){var t=0;r.has(e)&&(t=r.get(e).length,r.delete(e),c[0]-=t,0===c[0]&&n.events.dispatch("hyphenopolyEnd"))}};var l=function(){var e="."+n.c.dontHyphenateClass,r=null;for(r in t.dontHyphenate)t.dontHyphenate[r]&&(e+=", "+r);return e}(),s=t.selectors.join(", ")+", "+l;function u(r,c,l,h){h=h||!1;var p=function(e,n){return e.lang&&"string"==typeof e.lang?e.lang.toLowerCase():n&&""!==n?n.toLowerCase():o(e,!0)}(r,c);"H9Y"===n.cf.langs[p]?(a.add(r,p,l),!h&&t.safeCopy&&function(n){n.addEventListener("copy",(function(n){n.preventDefault();var t=e.getSelection(),r=t.getRangeAt(0).cloneContents(),a=document.createElement("div");a.appendChild(r);var o=a.innerHTML,c=t.toString();n.clipboardData.setData("text/plain",c.replace(new RegExp(i,"g"),"")),n.clipboardData.setData("text/html",o.replace(new RegExp(i,"g"),""))}),!0)}(r)):n.cf.langs[p]||n.events.dispatch("error",{lvl:"warn",msg:"Element with '"+p+"' found, but '"+p+".hpb' not loaded. Check language tags!"});var f=r.childNodes;Array.prototype.forEach.call(f,(function(e){1!==e.nodeType||function(e,n){return e.matches||(e.matches=e.msMatchesSelector||e.webkitMatchesSelector),e.matches(n)}(e,s)||u(e,p,l,!0)}))}t.selectors.forEach((function(n){var t=e.document.querySelectorAll(n);Array.prototype.forEach.call(t,(function(e){u(e,o(e,!0),n,!1)}))})),n.elementsReady=!0}var u=new Map;function h(e,r,a){var o=t[a],i=o.hyphen;function c(t){var c,l=e.cache.get(a).get(t);return!o.mixedCase&&(c=t,Array.prototype.map.call(c,(function(e){return e===e.toLowerCase()})).some((function(e,n,t){return e!==t[0]})))&&(l=t),l||(e.exceptions.has(t)?l=e.exceptions.get(t).replace(/-/g,o.hyphen):-1===t.indexOf("-")?t.length>61?(n.events.dispatch("error",{lvl:"warn",msg:"found word longer than 61 characters"}),l=t):l=e.hyphenateFunction(t,i.charCodeAt(0),o.leftminPerLang[r],o.rightminPerLang[r]):l=function(n){var t=String.fromCharCode(8203),i=null,c=null;return"auto"===o.compound||"all"===o.compound?(c=h(e,r,a),i=n.split("-").map((function(e){return e.length>=o.minWordLength?c(e):e})),n="auto"===o.compound?i.join("-"):i.join("-"+t)):n=n.replace("-","-"+t),n}(t),e.cache.get(a).set(t,l)),l}return e.cache.set(a,new Map),u.set(r+"-"+a,c),c}var p=new Map;function f(e,r,o){var i=n.languages.get(e),c=t[r],l=c.minWordLength,s=t.normalize&&Boolean(String.prototype.normalize),f=e+"-"+r,g=u.has(f)?u.get(f):h(i,e,r),m=p.has(r)?p.get(r):function(e){function n(n,r,a,o){var i=t[e],c=i.hyphen;return-1!==".\\+*?[^]$(){}=!<>|:-".indexOf(i.hyphen)&&(c="\\"+i.hyphen),3===i.orphanControl&&" "===r&&(r=String.fromCharCode(160)),r+a.replace(new RegExp(c,"g"),"")+o}return p.set(e,n),n}(r),d=i.genRegExps.get(r);function y(e){var n=null;return n=s?e.normalize("NFC").replace(d,g):e.replace(d,g),1!==c.orphanControl&&(n=n.replace(/(\u0020*)(\S+)(\s*)$/,m)),n}var v=null;return"string"==typeof o?v=y(o):o instanceof HTMLElement&&function(t){n.events.dispatch("beforeElementHyphenation",{el:t,lang:e});var r=t.childNodes;Array.prototype.forEach.call(r,(function(e){3===e.nodeType&&e.data.length>=l&&(e.data=y(e.data))})),a.counter[0]-=1,n.events.dispatch("afterElementHyphenation",{el:t,lang:e})}(o),v}function g(e,t){t?t.forEach((function(n){f(e,n.selector,n.element)})):n.events.dispatch("error",{lvl:"warn",msg:"engine for language '"+e+"' loaded, but no elements found."}),0===a.counter[0]&&n.events.dispatch("hyphenopolyEnd")}function m(e,r,a,o,i){a=a.replace(/-/g,"");var s=function(e){return n.languages||(n.languages=new Map),n.languages.has(e)||n.languages.set(e,c()),n.languages.get(e)}(e);s.engineReady||(s.cache=new Map,n.c.exceptions.global&&(n.c.exceptions[e]?n.c.exceptions[e]+=", "+n.c.exceptions.global:n.c.exceptions[e]=n.c.exceptions.global),n.c.exceptions[e]?(s.exceptions=function(e){var n=new Map;return e.split(", ").forEach((function(e){var t=e.replace(/-/g,"");n.set(t,e)})),n}(n.c.exceptions[e]),delete n.c.exceptions[e]):s.exceptions=new Map,s.genRegExps=new Map,s.leftmin=o,s.rightmin=i,s.hyphenateFunction=r,t.selectors.forEach((function(n){var r=t[n];0===r.leftminPerLang&&Object.defineProperty(r,"leftminPerLang",l(c(),2)),0===r.rightminPerLang&&Object.defineProperty(r,"rightminPerLang",l(c(),2)),r.leftminPerLang[e]?r.leftminPerLang[e]=Math.max(s.leftmin,r.leftmin,r.leftminPerLang[e]):r.leftminPerLang[e]=Math.max(s.leftmin,r.leftmin),r.rightminPerLang[e]?r.rightminPerLang[e]=Math.max(s.rightmin,r.rightmin,r.rightminPerLang[e]):r.rightminPerLang[e]=Math.max(s.rightmin,r.rightmin),s.genRegExps.set(n,new RegExp("[\\w"+a+String.fromCharCode(8204)+"-]{"+r.minWordLength+",}","gi"))})),s.engineReady=!0),Hyphenopoly.events.dispatch("engineReady",{msg:e})}function d(e){if(n.cf.wasm)return 65536*Math.ceil(e/65536);var t=Math.ceil(Math.log(e)*Math.LOG2E);return t<=12?4096:t<24?1<<t:Math.ceil(e/(1<<24))*(1<<24)}n.createHyphenator=function(e){return function(n,t){return f(e,t=t||".hyphenate",n)}},n.unhyphenate=function(){a.each((function(e,n){n.forEach((function(e){var n=e.element.firstChild,r=t[e.selector].hyphen;n.data=n.data.replace(new RegExp(r,"g"),"")}))}))};var y=function(){if(e.TextDecoder){var n=new TextDecoder("utf-16le");return function(e){return n.decode(e)}}return function(e){return String.fromCharCode.apply(null,e)}}();function v(e){var t=new Uint32Array(e).subarray(0,8);if(40005736!==t[0])throw n.events.dispatch("error",{lvl:"error",msg:"Pattern file format error: "+new Uint8Array(Uint32Array.of(t[0]).buffer)}),new Error("Pattern file format error!");var r=t[7],a=1280+r+(4-(1280+r)%4),o=a+4*t[6];return{ho:o+512,hp:o+192,hs:Math.max(d(o+512+t[2]+t[3]),2097152),hw:o+256,lm:t[4],pl:t[3],po:o+512+t[2],pt:a,rm:t[5],to:o+512+t[1],tw:o+128,vs:1280,wo:o}}function b(e,t){var r=n.cf.wasm?e.wasmMemory.buffer:e.heapBuffer,a=new Uint16Array(r).subarray(e.wo>>1,64+(e.wo>>1)),o=new Uint16Array(r).subarray(e.hw>>1,128+(e.hw>>1));return a[0]=95,function(e,n,r,i){var c=0,l=0;do{l=e.charCodeAt(c),a[c+=1]=l}while(l);return a[c]=95,a[c+1]=0,1===t(r,i,n)&&(e=y(o.subarray(1,o[0]+1))),e}}function w(e){Promise.all([n.bins.get(e),n.bins.get("hyphenEngine")]).then((function(t){var r=t[0],a=v(r),o=t[1],i=n.specMems.get(e),c=i.buffer.byteLength>=a.hs?i:new WebAssembly.Memory({initial:a.hs/65536,maximum:256});new Uint32Array(c.buffer).set(new Uint32Array(r),a.ho>>2),a.wasmMemory=c,WebAssembly.instantiate(o,{env:{memory:a.wasmMemory,memoryBase:0},x:a}).then((function(n){var t=n.exports.convert();m(e,b(a,n.exports.hyphenate),y(new Uint16Array(c.buffer).subarray(385,384+t)),a.lm,a.rm)}))}))}function E(t){var r=n.bins.get(t),a=v(r),o=n.specMems.get(t),i=o.byteLength>=a.hs?o:new ArrayBuffer(a.hs),c=new Uint8Array(i),l=new Uint8Array(r);c.set(l,a.ho),a.heapBuffer=i;var s=asmHyphenEngine({Int32Array:e.Int32Array,Math:Math,Uint16Array:e.Uint16Array,Uint8Array:e.Uint8Array},a,a.heapBuffer),u=s.convert();m(t,b(a,s.hyphenate),y(new Uint16Array(i).subarray(385,384+u)),a.lm,a.rm)}var x=null,L=[];function M(e,n){"*"===e?("wasm"===n?x=w:"asm"===n&&(x=E),L.forEach((function(e){x(e)}))):x?x(e):L.push(e)}n.events.define("contentLoaded",(function(){var a;a=e.document.getElementsByTagName("html")[0],(r=o(a,!1))||""===t.defaultLanguage||(r=t.defaultLanguage),s(),n.events.dispatch("elementsReady")}),!1),n.events.define("elementsReady",(function(){a.each((function(e,t){n.languages&&n.languages.has(e)&&n.languages.get(e).engineReady&&g(e,t)}))}),!1),n.events.define("engineLoaded",(function(e){M("*",e.msg)}),!1),n.events.define("hpbLoaded",(function(e){M(e.msg,"*")}),!1),n.events.addListener("loadError",(function(e){"wasm"!==e.msg&&a.rem(e.name)}),!1),n.events.define("engineReady",(function(e){n.elementsReady&&g(e.msg,a.list.get(e.msg))}),!1),n.events.define("hyphenopolyStart",null,!0),n.events.define("hyphenopolyEnd",(function(){e.clearTimeout(t.timeOutHandler),"none"!==t.hide&&n.toggle("on"),t.keepAlive||(window.Hyphenopoly=null)}),!1),n.events.define("beforeElementHyphenation",null,!0),n.events.define("afterElementHyphenation",null,!0),n.events.tempRegister.forEach((function(e){n.events.addListener(e.name,e.handler,!1)})),delete n.events.tempRegister,n.events.dispatch("hyphenopolyStart",{msg:"Hyphenopoly started"}),e.clearTimeout(n.c.timeOutHandler),Object.defineProperty(t,"timeOutHandler",l(e.setTimeout((function(){n.events.dispatch("timeout",{delay:t.timeout})}),t.timeout),2)),n.events.deferred.forEach((function(e){n.events.dispatch(e.name,e.data)})),delete n.events.deferred}(Hyphenopoly)}(window);